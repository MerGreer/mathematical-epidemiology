<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
<script>// Make *any* pre with class 'sagecell-sage' an executable Sage cell
// Their results will be linked, only within language type
sagecell.makeSagecell({
  "inputLocation": "pre.sagecell-sage",
  "linked": true,
  "linkKey": "linked-sage",
  "autoeval": false,
  "languages": [
    "sage"
  ],
  "evalButtonText": "Evaluate (Sage)"
});
</script>
</head>
<body class="ignore-math">
<article class="activity project-like"><h4 class="heading">
<span class="type">Activity</span><span class="space"> </span><span class="codenumber">10.2</span><span class="period">.</span>
</h4>
<div class="para">In <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#expl-RSS" class="xref" data-knowl="./knowl/xref/expl-RSS.html" data-reveal-label="Reveal" data-close-label="Close" title="Exploration 10.1: Visually Demonstrating Differences Between a Model and Data">Exploration 10.1</a> we worked with both a data set, and model output, for times <span class="process-math">\(t=0, 1, 2, 3, 4, 5, 6\text{.}\)</span> The data values and model output appear in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output">Table 10.1</a>, with model output rounded to two decimal places.</div> <figure class="table table-like"><figcaption><span class="type">Table</span><span class="space"> </span><span class="codenumber">10.1<span class="period">.</span></span><span class="space"> </span>SI Model: Data Values and Model Output</figcaption><div class="tabular-box natural-width"><table class="tabular">
<tr class="header-horizontal">
<th scope="col" class="c m b0 r0 l0 t0 lines">Time</th>
<th scope="col" class="c m b0 r0 l0 t0 lines">Data Value</th>
<th scope="col" class="c m b0 r0 l0 t0 lines">Model Output</th>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">0</td>
<td class="c m b0 r0 l0 t0 lines">1</td>
<td class="c m b0 r0 l0 t0 lines">1.0</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">1</td>
<td class="c m b0 r0 l0 t0 lines">2</td>
<td class="c m b0 r0 l0 t0 lines">4.19</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">2</td>
<td class="c m b0 r0 l0 t0 lines">4</td>
<td class="c m b0 r0 l0 t0 lines">14.54</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">3</td>
<td class="c m b0 r0 l0 t0 lines">10</td>
<td class="c m b0 r0 l0 t0 lines">32.38</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">4</td>
<td class="c m b0 r0 l0 t0 lines">22</td>
<td class="c m b0 r0 l0 t0 lines">44.58</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">5</td>
<td class="c m b0 r0 l0 t0 lines">40</td>
<td class="c m b0 r0 l0 t0 lines">48.68</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">6</td>
<td class="c m b0 r0 l0 t0 lines">50</td>
<td class="c m b0 r0 l0 t0 lines">49.70</td>
</tr>
</table></div></figure> <div class="para">RSS compares each Data Value from <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output">Table 10.1</a> with the Model Output from the same time by subtracting one from the other and squaring the result.</div> <ol class="decimal" id="activity-rss-intro-1-4">
<li><div class="para">Try at least two of these comparisons on your own: for times <span class="process-math">\(t=1\)</span> and <span class="process-math">\(t=2\text{,}\)</span> subtract the Model Output in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output">Table 10.1</a> from the corresponding Data Value and square the result. Later in this activity, we will compare these hand-computed values with the corresponding values computed via Python.</div></li>
<li>
<div class="para">Next, read the code block below to identify where in the code, and how, we subtract each Model Output from its corresponding Data Value. Also identify where and how the code adds up all the squared differences to produce a total value for RSS.</div>
<pre id="activity-rss-intro-1-4-2-2" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">#Import packages
import numpy as np
import matplotlib.pyplot as plt
from scipy.integrate import odeint

#Include data from the Zombie Game App
t_steps = [0, 1, 2, 3, 4, 5, 6]
I_data = [1, 2, 4, 10, 22, 40, 50]

#Define the system of differential equations, and call it "hz"
def hz(y, t):
  s, i = y #Define y as consisting of s and i, in that order
  dydt = [-beta * s * i, beta * s * i] # These are the right-hand sides of the SI model
  return dydt

beta = 0.03 #Give beta a value
y0 = [49, 1] #Set initial values for Susceptibles and Infectious, in that order
t_range = np.arange(0.0, 8.0, 0.1) #Set the time range, the set the size of the time steps to use when "stepping through" to numerically solve the system of differential equations

sol = odeint(hz, y0, t_range) #Give the name "sol" to the lists of numerical values in the solution, and give "odeint" the information needed to solve

RSS = 0 #Initialize the value of RSS to be 0

for x in range(0,7):
  new_square = (I_data[x] - sol[10*x, 1])**2
  print("Squared distance at time", x, "=", new_square)
  RSS = RSS + new_square

print("RSS = ", RSS)
</script></pre>
</li>
<li>
<div class="para">Then run the code block. Compare its results with your results for <span class="process-math">\(t=1\)</span> and <span class="process-math">\(t=2\)</span> in part (1) of this Activity. Describe how the results are similar and how they are different, and provide an explanation for why they are not identical.</div>
<div class="para">Then examine all the results from the code, including the total value for RSS for this model with this data set. State at least two of your observations.</div>
</li>
<li>
<div class="para">Once you understand how the code works, experiment with different values of <span class="process-math">\(\beta\text{.}\)</span> Your goal is to improve the fit between the model and the data set. While adjusting <span class="process-math">\(\beta\text{,}\)</span> consider including a plot of the graph showing both the solution curve of the model and the data points. You can do this by copying plotting commands from the Python block in this chapter’s Exploration and pasting them into the Python block in this activity.</div>
<div class="para">Write about your experiments and their results. State how you improved the fit of the model to data by adjusting <span class="process-math">\(\beta\text{,}\)</span> and include an explanation of how you know the fit is improved.</div>
</li>
</ol>
<div class="solutions"><details class="answer solution-like born-hidden-knowl"><summary class="knowl__link"><span class="type">Answer</span><span class="period">.</span></summary><div class="answer solution-like knowl__content"><ol class="decimal" id="activity-rss-intro-2-1">
<li><div class="para">At time <span class="process-math">\(t=1\text{,}\)</span> compute <span class="process-math">\((4.19-2)^2\)</span> to get the value <span class="process-math">\(4.7961\text{.}\)</span> At time <span class="process-math">\(t=2\text{,}\)</span> compute <span class="process-math">\((14.54-4)^2\)</span> to get the value <span class="process-math">\(111.0916\text{.}\)</span>
</div></li>
<li>
<div class="para">In line 25, the code <code class="code-inline tex2jax_ignore">I_data[x] - sol[10*x, 1]</code> starts with the data value given in line 8 by <code class="code-inline tex2jax_ignore">I_data[x]</code> and subtracts the model value given by <code class="code-inline tex2jax_ignore">sol[10*x, 1]</code>.</div>
<div class="para">The <code class="code-inline tex2jax_ignore">x</code> in <code class="code-inline tex2jax_ignore">I_data[x]</code> is determined by the range of <code class="code-inline tex2jax_ignore">x</code> values shown in line 24: <code class="code-inline tex2jax_ignore">range(0,7)</code> tells Python to allow <code class="code-inline tex2jax_ignore">x</code> to equal 0, 1, 2, 3, 4, 5, and 6. Python ranges do not include the last number shown, so 7 is not included in <code class="code-inline tex2jax_ignore">range(0,7)</code>.</div>
<div class="para">When <code class="code-inline tex2jax_ignore">x</code> equals 0, <code class="code-inline tex2jax_ignore">I_data[0]</code> equals the initial value of the <code class="code-inline tex2jax_ignore">I_data</code> list in line 8, that is, <code class="code-inline tex2jax_ignore">I_data[0]</code> equals 1. Then <code class="code-inline tex2jax_ignore">I_data[1]</code> equals 2, <code class="code-inline tex2jax_ignore">I_data[2]</code> equals 4, and so on, continuing until <code class="code-inline tex2jax_ignore">I_data[6]</code> equals 50.</div>
<div class="para">The code <code class="code-inline tex2jax_ignore">sol[10*x, 1]</code> examines Python’s list of model solutions, which we have named <code class="code-inline tex2jax_ignore">sol</code> in line 20. To see the full list <code class="code-inline tex2jax_ignore">sol</code>, try adding a new line of code at the end of the Python block, and in that line, type <code class="code-inline tex2jax_ignore">print(sol)</code>. Running the Python block with the <code class="code-inline tex2jax_ignore">print(sol)</code> command shows that the list <code class="code-inline tex2jax_ignore">sol</code> is arranged into rows and columns. Each row shows the value of both <span class="process-math">\(S(t)\)</span> and <span class="process-math">\(I(t)\)</span> at a specific time value. The initial column, which Python labels column <code class="code-inline tex2jax_ignore">0</code>, shows the values of <span class="process-math">\(S(t)\)</span> at all times we computed. The next column, which Python labels column <code class="code-inline tex2jax_ignore">1</code>, shows the values of <span class="process-math">\(I(t)\)</span> at all times we computed.</div>
<div class="para">The times for which we compute solutions are determined by the command <code class="code-inline tex2jax_ignore">t_range = np.arange(0.0, 8.0, 0.1)</code> in line 18. This command says to compute solutions starting at time 0.0, and ending at time 8.0, moving in time increments of 0.1. This means we compute solutions at times 0.0, 0.1, 0.2, and so on, with the last solutions computed at time 7.9. To see the values in <code class="code-inline tex2jax_ignore">t_range</code>, you can add a new line of code: <code class="code-inline tex2jax_ignore">print(t_range)</code>. Running the Python block with the command <code class="code-inline tex2jax_ignore">print(t_range)</code> shows the list of all <code class="code-inline tex2jax_ignore">t_range</code> values.</div>
</li>
<li>
<div class="para">The code produces the value <span class="process-math">\(4.795784246749833\)</span> for the squared distance at time <span class="process-math">\(t=1\text{.}\)</span> Our hand-computed value from part (1) of this Activity was <span class="process-math">\(4.7961\text{.}\)</span> We see that these values are very close to each other. The difference between them is due to our rounding the values in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output">Table 10.1</a> to two decimal points.</div>
<div class="para">Similarly, the code produces the value <span class="process-math">\(111.02234652523701\)</span> for the squared distance at time <span class="process-math">\(t=2\text{,}\)</span> whereas our hand-computed value from part (1) of this Activity was <span class="process-math">\(111.0916\text{.}\)</span> Again, the difference in values is due to rounding.</div>
<div class="para">From here, make additional observations. This is open-ended. Observations may include noticing that the squared distances are notably larger when the data point is further from the value on the solution curve of the model, compared with when the data point is close to the value on the solution curve of the model. There may also be observations about the overall number computed for RSS. This overall RSS number is helpful when we reach part (4) and try to improve the fit of the model to data</div>
<div class="para">Many other observations are possible.</div>
</li>
<li>
<div class="para">This is open-ended. Values of <span class="process-math">\(\beta\)</span> that are closer to <span class="process-math">\(0.02\)</span> tend to produce a better fit of model to data, compared with the starting value of <span class="process-math">\(\beta = 0.03\text{.}\)</span> You may wish to change additional decimal places of <span class="process-math">\(\beta\)</span> to improve the fit even further.</div>
<div class="para">It is also appropriate to give visual (graph-based) and verbal (word-based) descriptions of changes in the graph of model and data, as the value of <span class="process-math">\(\beta\)</span> changes.</div>
</li>
</ol></div></details></div></article><span class="incontext"><a class="internal" href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro">in-context</a></span>
</body>
</html>
