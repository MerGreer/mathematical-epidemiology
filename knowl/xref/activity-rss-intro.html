<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
<script>// Make *any* pre with class 'sagecell-sage' an executable Sage cell
// Their results will be linked, only within language type
sagecell.makeSagecell({
  "inputLocation": "pre.sagecell-sage",
  "linked": true,
  "linkKey": "linked-sage",
  "autoeval": false,
  "languages": [
    "sage"
  ],
  "evalButtonText": "Evaluate (Sage)"
});
</script>
</head>
<body class="ignore-math">
<article class="activity project-like"><h4 class="heading">
<span class="type">Activity</span><span class="space"> </span><span class="codenumber">10.2</span><span class="period">.</span>
</h4>
<div class="para">In <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#expl-RSS" class="xref" data-knowl="./knowl/xref/expl-RSS.html" data-reveal-label="Reveal" data-close-label="Close" title="Exploration 10.1: Visually Demonstrating Differences Between a Model and Data">Exploration 10.1</a> we worked with both a data set, and model output, for the Infectious population <span class="process-math">\(I(t)\)</span> at times <span class="process-math">\(t=0, 1, 2, 3, 4, 5, 6\text{.}\)</span> The data values and model output appear in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output for I(t)">Table 10.1</a>, with model output rounded to two decimal places.</div> <figure class="table table-like"><figcaption><span class="type">Table</span><span class="space"> </span><span class="codenumber">10.1<span class="period">.</span></span><span class="space"> </span>SI Model: Data Values and Model Output for <span class="process-math">\(I(t)\)</span></figcaption><div class="tabular-box natural-width"><table class="tabular">
<tr class="header-horizontal">
<th scope="col" class="c m b0 r0 l0 t0 lines">Time</th>
<th scope="col" class="c m b0 r0 l0 t0 lines">Data Value</th>
<th scope="col" class="c m b0 r0 l0 t0 lines">Model Output</th>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">0</td>
<td class="c m b0 r0 l0 t0 lines">1</td>
<td class="c m b0 r0 l0 t0 lines">1.0</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">1</td>
<td class="c m b0 r0 l0 t0 lines">2</td>
<td class="c m b0 r0 l0 t0 lines">4.19</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">2</td>
<td class="c m b0 r0 l0 t0 lines">4</td>
<td class="c m b0 r0 l0 t0 lines">14.54</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">3</td>
<td class="c m b0 r0 l0 t0 lines">10</td>
<td class="c m b0 r0 l0 t0 lines">32.38</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">4</td>
<td class="c m b0 r0 l0 t0 lines">22</td>
<td class="c m b0 r0 l0 t0 lines">44.58</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">5</td>
<td class="c m b0 r0 l0 t0 lines">40</td>
<td class="c m b0 r0 l0 t0 lines">48.68</td>
</tr>
<tr>
<td class="c m b0 r0 l0 t0 lines">6</td>
<td class="c m b0 r0 l0 t0 lines">50</td>
<td class="c m b0 r0 l0 t0 lines">49.70</td>
</tr>
</table></div></figure> <div class="para">RSS compares each Data Value from <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output for I(t)">Table 10.1</a> with the Model Output from the same time by subtracting one from the other and squaring the result.</div> <ol class="decimal" id="activity-rss-intro-1-4">
<li><div class="para">Try at least two of these comparisons on your own: for times <span class="process-math">\(t=1\)</span> and <span class="process-math">\(t=2\text{,}\)</span> subtract the Model Output in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output for I(t)">Table 10.1</a> from the corresponding Data Value and square the result. Later in this activity, we will compare these hand-computed values with the corresponding values computed via Python.</div></li>
<li>
<div class="para">Read the code block below to identify where in the code, and how, we do each of the following. You may find it helpful to look up some of the Python commands online to better understand the details of what they do. Printing more output is another way to build understanding: you can include commands such as <code class="code-inline tex2jax_ignore">print(sol)</code> or <code class="code-inline tex2jax_ignore">print(t_range)</code> near the bottom of the Python code block to be sure you understand the structures of <code class="code-inline tex2jax_ignore">sol</code>, <code class="code-inline tex2jax_ignore">t_range</code>, or other quantities.</div>
<ol class="lower-alpha" id="activity-rss-intro-1-4-2-2">
<li><div class="para">The default code computes the numbers of Susceptibles and the numbers of Infectious at times 0, 0.1, 0.2, 0.3, and so on, until time 6.9. Where and how does the code say to do this?</div></li>
<li><div class="para">When we say to complete a command for <code class="code-inline tex2jax_ignore">x in range(0,7)</code>, which values of <span class="process-math">\(x\)</span> are we specifying?</div></li>
<li><div class="para">Line 24 begins with <code class="code-inline tex2jax_ignore">for</code> and then, in lines 25, 26, and 27, gives three commands. The word <code class="code-inline tex2jax_ignore">for</code> means to complete these commands repeatedly, as many times as specified in the <code class="code-inline tex2jax_ignore">x in range(0,7)</code> command you focused on in part (b) above. What happens in each of the three commands following <code class="code-inline tex2jax_ignore">for</code>? For line 27, connect your answer back to the command <code class="code-inline tex2jax_ignore">RSS = 0</code> in line 22.</div></li>
<li><div class="para">Within line 25, how do we specify that we seek Model Output at times 0, 1, 2, and so on, but not the Model Output at non-integer times such as 0.3? Why do we need to specify that we seek Model Output only at integer-valued times?</div></li>
</ol>
<pre id="activity-rss-intro-1-4-2-3" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">#Import packages
import numpy as np
import matplotlib.pyplot as plt
from scipy.integrate import odeint

#Include data from the Zombie Game App
t_steps = [0, 1, 2, 3, 4, 5, 6]
I_data = [1, 2, 4, 10, 22, 40, 50]

#Define the system of differential equations, and call it "hz"
def hz(y, t):
  s, i = y #Define y as consisting of s and i, in that order
  dydt = [-beta * s * i, beta * s * i] # These are the right-hand sides of the SI model
  return dydt

beta = 0.03 #Give beta a value
y0 = [49, 1] #Set initial values for Susceptibles and Infectious, in that order
t_range = np.arange(0.0, 7.0, 0.1) #Set the time range, the set the size of the time steps to use when "stepping through" to numerically solve the system of differential equations

sol = odeint(hz, y0, t_range) #Give the name "sol" to the lists of numerical values in the solution, and give "odeint" the information needed to solve

RSS = 0 #Initialize the value of RSS to be 0

for x in range(0,7):
  new_square = (I_data[x] - sol[10*x, 1])**2
  print("Squared distance at time", x, "=", new_square)
  RSS = RSS + new_square

print("RSS = ", RSS)
</script></pre>
</li>
<li>
<div class="para">Run the code block. Compare its results with your results for <span class="process-math">\(t=1\)</span> and <span class="process-math">\(t=2\)</span> in part (1) of this Activity. Describe how the results are similar and how they are different, and provide an explanation for why they are not identical.</div>
<div class="para">Then examine all the results from the code, including the total value for RSS for this model with this data set. State at least two of your observations.</div>
</li>
<li>
<div class="para">Once you understand how the code works, experiment with different values of <span class="process-math">\(\beta\text{.}\)</span> Your goal is to improve the fit between the model and the data set. While adjusting <span class="process-math">\(\beta\text{,}\)</span> consider including a plot of the graph showing both the solution curve of the model and the data points. You can do this by copying plotting commands from the Python block in this chapter’s Exploration and pasting them into the Python block in this activity.</div>
<div class="para">Write about your experiments and their results. State how you improved the fit of the model to data by adjusting <span class="process-math">\(\beta\text{,}\)</span> and include an explanation of how you know the fit is improved.</div>
</li>
</ol>
<div class="solutions"><details class="answer solution-like born-hidden-knowl"><summary class="knowl__link"><span class="type">Answer</span><span class="period">.</span></summary><div class="answer solution-like knowl__content"><ol class="decimal" id="activity-rss-intro-2-1">
<li><div class="para">At time <span class="process-math">\(t=1\text{,}\)</span> compute <span class="process-math">\((4.19-2)^2\)</span> to get the value <span class="process-math">\(4.7961\text{.}\)</span> At time <span class="process-math">\(t=2\text{,}\)</span> compute <span class="process-math">\((14.54-4)^2\)</span> to get the value <span class="process-math">\(111.0916\text{.}\)</span>
</div></li>
<li><div class="para"><ol class="lower-alpha" id="activity-rss-intro-2-1-2-1">
<li><div class="para">Line 20 tells Python to compute <code class="code-inline tex2jax_ignore">sol</code>, which is the array of values of Susceptibles and Infectious at all times in <code class="code-inline tex2jax_ignore">t_range</code>. Line 18 establishes <code class="code-inline tex2jax_ignore">t_range</code> as the times from 0.0 to 6.9 using the command <code class="code-inline tex2jax_ignore">t_range = np.arange(0.0, 7.0, 0.1)</code>. Here, <code class="code-inline tex2jax_ignore">np.arange(0.0, 7.0, 0.1)</code> indicates that the range of time values in <code class="code-inline tex2jax_ignore">t_range</code> should start at time 0.0 and end at time 7.0, moving in time increments of 0.1. This means we compute solutions at times 0.0, 0.1, 0.2, and so on, with the last solutions computed at time 6.9. To see the values in <code class="code-inline tex2jax_ignore">t_range</code>, you can run the Python block with the added command <code class="code-inline tex2jax_ignore">print(t_range)</code>. (We discussed these commands in <a href="ch-visualization-graphing-model-results-and-data.html#exer-first-odeint-code" class="xref" data-knowl="./knowl/xref/exer-first-odeint-code.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 3.4">Activity 3.4</a> and are refreshing our memory on them here.)</div></li>
<li><div class="para">The command <code class="code-inline tex2jax_ignore">x in range(0,7)</code> specifies the values <span class="process-math">\(x=0,1,2,3,4,5,6\text{.}\)</span> In general, Python begins with, and includes, the first number in a <code class="code-inline tex2jax_ignore">range</code> command, and then stops at, but does not include, the last number in the <code class="code-inline tex2jax_ignore">range</code> command. This is why <span class="process-math">\(0\)</span> is included, but <span class="process-math">\(7\)</span> is not. To see the values in <code class="code-inline tex2jax_ignore">range(0,7)</code>, you can run the Python block with the added command <code class="code-inline tex2jax_ignore">for x in range(0,7):</code> followed by the line <code class="code-inline tex2jax_ignore">print(x)</code>. The second line needs to be indented.</div></li>
<li>
<div class="para">The command in line 25 starts with the Data Value given in line 8 by <code class="code-inline tex2jax_ignore">I_data[x]</code> and subtracts the Model Output given by <code class="code-inline tex2jax_ignore">sol[10*x, 1]</code>.</div>
<div class="para">The command in line 26 prints the squared distance computed in line 25. Printing pieces of output can help us make sure the code is doing what we expect and want it to do.</div>
<div class="para">The command in line 27 updates the RSS value, always adding in the new squared distance. Earlier in the code, in line 22, we set the value of RSS to 0. This makes certain that we always being with <span class="process-math">\(RSS=0\)</span> and add only the squared distances for our current comparison of Data Values with Model Outputs.</div>
</li>
<li><div class="para">We select Model Output values only at integer-valued time steps by multiplying <code class="code-inline tex2jax_ignore">x</code> by <code class="code-inline tex2jax_ignore">10</code> when writing <code class="code-inline tex2jax_ignore">sol[10*x, 1]</code>. Recall that the array <code class="code-inline tex2jax_ignore">sol</code> contains Model Output for <span class="process-math">\(S(t)\)</span> and <span class="process-math">\(I(t)\)</span> for <span class="process-math">\(t=0.0, 0.1, 0.2, 0.3, ..., 6.9\text{.}\)</span> We select Model Output at times <span class="process-math">\(t=0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0\)</span> to correspond to the times at which Data Values exist for comparison. Since <code class="code-inline tex2jax_ignore">x</code> takes on values from <span class="process-math">\(0.0\)</span> to <span class="process-math">\(6.9\text{,}\)</span> and since Python counts starting at <span class="process-math">\(0\text{,}\)</span> then <code class="code-inline tex2jax_ignore">sol[10*0, 1]</code> tells us the Model Output at time <span class="process-math">\(0\text{,}\)</span> <code class="code-inline tex2jax_ignore">sol[10*1, 1]</code> tells us the Model Output at time <span class="process-math">\(1\text{,}\)</span> and so on, until <code class="code-inline tex2jax_ignore">sol[10*6, 1]</code> tells us the Model Output at time <span class="process-math">\(6\text{,}\)</span> where <span class="process-math">\(6\)</span> is the last time for which we have a Data Value.</div></li>
</ol></div></li>
<li>
<div class="para">The code produces the value <span class="process-math">\(4.795784246749833\)</span> for the squared distance at time <span class="process-math">\(t=1\text{.}\)</span> Our hand-computed value from part (1) of this Activity was <span class="process-math">\(4.7961\text{.}\)</span> We see that these values are very close to each other. The difference between them is due to our rounding the values in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#table-si-model-data-values-and-model-output" class="xref" data-knowl="./knowl/xref/table-si-model-data-values-and-model-output.html" data-reveal-label="Reveal" data-close-label="Close" title="Table 10.1: SI Model: Data Values and Model Output for I(t)">Table 10.1</a> to two decimal points.</div>
<div class="para">Similarly, the code produces the value <span class="process-math">\(111.02234652523701\)</span> for the squared distance at time <span class="process-math">\(t=2\text{,}\)</span> whereas our hand-computed value from part (1) of this Activity was <span class="process-math">\(111.0916\text{.}\)</span> Again, the difference in values is due to rounding.</div>
<div class="para">From here, make additional observations. This is open-ended. Observations may include noticing that the squared distances are notably larger when the data point is further from the value on the solution curve of the model, compared with when the data point is close to the value on the solution curve of the model. There may also be observations about the overall number computed for RSS. This overall RSS number is helpful when we reach part (4) and try to improve the fit of the model to data</div>
<div class="para">Many other observations are possible.</div>
</li>
<li>
<div class="para">This is open-ended. Values of <span class="process-math">\(\beta\)</span> that are closer to <span class="process-math">\(0.02\)</span> tend to produce a better fit of model to data, compared with the starting value of <span class="process-math">\(\beta = 0.03\text{.}\)</span> You may wish to change additional decimal places of <span class="process-math">\(\beta\)</span> to improve the fit even further.</div>
<div class="para">It is also appropriate to give visual (graph-based) and verbal (word-based) descriptions of changes in the graph of model and data, as the value of <span class="process-math">\(\beta\)</span> changes.</div>
</li>
</ol></div></details></div></article><span class="incontext"><a class="internal" href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro">in-context</a></span>
</body>
</html>
