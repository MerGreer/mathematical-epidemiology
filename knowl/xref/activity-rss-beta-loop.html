<!DOCTYPE html>
<html lang="en-US" dir="ltr">
<!--********************************************-->
<!--*       Generated from PreTeXt source      *-->
<!--*                                          *-->
<!--*         https://pretextbook.org          *-->
<!--*                                          *-->
<!--********************************************-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="robots" content="noindex, nofollow">
<script>// Make *any* pre with class 'sagecell-sage' an executable Sage cell
// Their results will be linked, only within language type
sagecell.makeSagecell({
  "inputLocation": "pre.sagecell-sage",
  "linked": true,
  "linkKey": "linked-sage",
  "autoeval": false,
  "languages": [
    "sage"
  ],
  "evalButtonText": "Evaluate (Sage)"
});
</script>
</head>
<body class="ignore-math">
<article class="activity project-like"><h4 class="heading">
<span class="type">Activity</span><span class="space"> </span><span class="codenumber">10.3</span><span class="period">.</span>
</h4>
<div class="para">This Activity focuses on coding, with the goal of comparing RSS values for multiple values of a parameter without having to run Python code separately for every value of that parameter. Start by reading the code in the Python block below, and use what you read to answer the questions that follow.</div> <pre id="activity-rss-beta-loop-1-2" class="ptx-sagecell sagecell-sage"><script type="text/x-sage">#Import packages 
import numpy as np 
import matplotlib.pyplot as plt  
from scipy.integrate import odeint

#Include data from the Zombie Game App 
t_steps = [0, 1, 2, 3, 4, 5, 6]
I_data = [1, 2, 4, 10, 22, 40, 50]

#Define the system of differential equations, and call it "hz"
def hz(y, t):
  s, i = y #Define y as consisting of s and i, in that order
  dydt = [-beta * s * i, beta * s * i] # These are the right-hand sides of the SI model
  return dydt
  
y0 = [49, 1] #Set initial values for Susceptibles and Infectious, in that order
t_range = np.arange(0.0, 7.0, 0.1) #Set the time range, the set the size of the time steps to use when "stepping through" to numerically solve the system of differential equations

for beta_value in (0.01, 0.02, 0.03, 0.04, 0.05):
  beta = beta_value
  sol = odeint(hz, y0, t_range) #Give the name "sol" to the lists of numerical values in the solution, and give "odeint" the information needed to solve
  RSS = 0 #Initialize the value of RSS to be 0
  for x in range(0,7):
    new_square = (I_data[x] - sol[10*x, 1])**2
    #print("Squared distance at time", x, "=", new_square)
    RSS = RSS + new_square
  print("When beta =", round(beta,4), ", RSS =", round(RSS,4))
</script></pre> <ol class="decimal" id="activity-rss-beta-loop-1-3">
<li><div class="para">Describe how we gave a value to <span class="process-math">\(\beta\)</span> in the code within <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro" class="xref" data-knowl="./knowl/xref/activity-rss-intro.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.2">Activity 10.2</a>, compared with how we give values to <span class="process-math">\(\beta\)</span> now in the code for <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-beta-loop" class="xref" data-knowl="./knowl/xref/activity-rss-beta-loop.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.3">Activity 10.3</a>. State the lines of code in which <span class="process-math">\(\beta\)</span> is given its values, and compare the commands used to give <span class="process-math">\(\beta\)</span> its values, explaining how each command works.</div></li>
<li><div class="para">In <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro" class="xref" data-knowl="./knowl/xref/activity-rss-intro.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.2">Activity 10.2</a> we run the command <code class="code-inline tex2jax_ignore">sol = odeint(hz, y0, t_range)</code> and give RSS its initial value of <span class="process-math">\(0\)</span> outside any <code class="code-inline tex2jax_ignore">for</code> loop. Now, in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-beta-loop" class="xref" data-knowl="./knowl/xref/activity-rss-beta-loop.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.3">Activity 10.3</a>, we run <code class="code-inline tex2jax_ignore">odeint</code> and reset <code class="code-inline tex2jax_ignore">RSS = 0</code> inside the new outer <code class="code-inline tex2jax_ignore">for</code> loop, but before running the inner <code class="code-inline tex2jax_ignore">for</code> loop to compute RSS for a specific value of <span class="process-math">\(\beta\text{.}\)</span> Explain the reasoning for where in the code we run <code class="code-inline tex2jax_ignore">odeint</code> and set <code class="code-inline tex2jax_ignore">RSS=0</code>.</div></li>
<li><div class="para">Discuss how indenting works for the nested <code class="code-inline tex2jax_ignore">for</code> loops. Python requires correct indenting.</div></li>
<li><div class="para">Discuss the commented-out <code class="code-inline tex2jax_ignore">print</code> command in line 25. Why might we choose not to see these results in this code, whereas we wanted to see these results in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro" class="xref" data-knowl="./knowl/xref/activity-rss-intro.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.2">Activity 10.2</a>, where this command appeared on line 26? Then discuss the <code class="code-inline tex2jax_ignore">print</code> command in line 27, and explain why the information it shows is especially helpful to us as we cycle through values of <span class="process-math">\(\beta\text{.}\)</span>
</div></li>
</ol>
<div class="solutions"><details class="answer solution-like born-hidden-knowl"><summary class="knowl__link"><span class="type">Answer</span><span class="period">.</span></summary><div class="answer solution-like knowl__content"><ol class="decimal" id="activity-rss-beta-loop-2-1">
<li>
<div class="para">In <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro" class="xref" data-knowl="./knowl/xref/activity-rss-intro.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.2">Activity 10.2</a> we give <span class="process-math">\(\beta\)</span> just one value, in line 16, by writing <code class="code-inline tex2jax_ignore">beta = 0.03</code>, that is, by naming <span class="process-math">\(\beta\)</span> and using the <code class="code-inline tex2jax_ignore">=</code> sign to assign a value to <span class="process-math">\(\beta\text{.}\)</span> The default code gives <span class="process-math">\(\beta\)</span> the value <span class="process-math">\(0.03\text{,}\)</span> and we can change this value by changing <span class="process-math">\(0.03\)</span> to a different number.</div>
<div class="para">In <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-beta-loop" class="xref" data-knowl="./knowl/xref/activity-rss-beta-loop.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.3">Activity 10.3</a> we state in line 19 that we will give <span class="process-math">\(\beta\)</span> the values <span class="process-math">\(0.01, 0.02, 0.03, 0.04,\)</span> and <span class="process-math">\(0.05\text{,}\)</span> one at a time. The first time the <code class="code-inline tex2jax_ignore">for</code> loop runs, <span class="process-math">\(\beta\)</span> is given the first of this list of values, that is, <span class="process-math">\(\beta = 0.01\text{.}\)</span> Each time the <code class="code-inline tex2jax_ignore">for</code> loop runs, <span class="process-math">\(\beta\)</span> is given the next value, as shown in line 20 of the code. In all, the default loop will run five times, once for each value of <span class="process-math">\(\beta\text{,}\)</span> and <span class="process-math">\(\beta\)</span> will take on each value one time. We can change the values in line 19 to run whichever values of <span class="process-math">\(\beta\)</span> we like.</div>
</li>
<li><div class="para">For each value of <span class="process-math">\(\beta\text{,}\)</span> we use Python to do two things: solve the system of differential equations for that value of <span class="process-math">\(\beta\text{,}\)</span> and compute the resulting RSS value comparing our Data Values with the Model Output from the solved differential equations. The outer <code class="code-inline tex2jax_ignore">for</code> loop cycles through different values of <span class="process-math">\(\beta\text{.}\)</span> For each, we recompute the solution array <code class="code-inline tex2jax_ignore">sol</code> by running <code class="code-inline tex2jax_ignore">odeint</code> on line 21, and we reset <code class="code-inline tex2jax_ignore">RSS = 0</code> on line 22. We are then ready to run the inner <code class="code-inline tex2jax_ignore">for</code> loop, starting on line 23, where we compute the specific RSS value for the current value of <span class="process-math">\(\beta\text{.}\)</span> It is important for computing this RSS value that we have reset <code class="code-inline tex2jax_ignore">RSS = 0</code> so that we do not add new squared differences to a past (non-zero) RSS value.</div></li>
<li><div class="para">Python syntax requires that we indent the commands within a <code class="code-inline tex2jax_ignore">for</code> loop. Indenting also serves as a visual signal to us, indicating which <code class="code-inline tex2jax_ignore">for</code> loop each command is part of. The commands within the outer <code class="code-inline tex2jax_ignore">for</code> loop, including the first line of the inner <code class="code-inline tex2jax_ignore">for</code> loop,  are indented the same amount. The commands within the inner <code class="code-inline tex2jax_ignore">for</code> loop are indented further. Notice that the <code class="code-inline tex2jax_ignore">print</code> command on line 27 is not as indented as commands on lines 24, 25, and 26. This tells us that line 27 is part of the outer <code class="code-inline tex2jax_ignore">for</code> loop rather than the inner <code class="code-inline tex2jax_ignore">for</code> loop.</div></li>
<li>
<div class="para">The <code class="code-inline tex2jax_ignore">print</code> command from line 25 was especially helpful in <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro" class="xref" data-knowl="./knowl/xref/activity-rss-intro.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.2">Activity 10.2</a> when we were learning, and perhaps troubleshooting, the code for computing RSS for a specific value of <span class="process-math">\(\beta\text{.}\)</span> In <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-intro" class="xref" data-knowl="./knowl/xref/activity-rss-intro.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.2">Activity 10.2</a> this print command appeared in line 26, and it showed us the step-by-step squared distances computed in Python that would be added together to produce the total RSS value. We compared some of these squared distances with values we computed by hand, both to make sure Python was doing what we wanted, and to build student understanding of the meaning of the RSS value.</div>
<div class="para">Once we understand how this <code class="code-inline tex2jax_ignore">for</code> loop works when computing RSS, we do not usually need to print all the squared distances. This is the reason why the <code class="code-inline tex2jax_ignore">print</code> command in line 25 of the code for <a href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-beta-loop" class="xref" data-knowl="./knowl/xref/activity-rss-beta-loop.html" data-reveal-label="Reveal" data-close-label="Close" title="Activity 10.3">Activity 10.3</a> is commented out. We can use this code if we want by removing the <code class="code-inline tex2jax_ignore">#</code> at the start of the line, but now we are more focused on seeing the RSS results for each value of <span class="process-math">\(\beta\text{.}\)</span> These RSS results appear due to the <code class="code-inline tex2jax_ignore">print</code> command in line 27, and we compare them to determine which <span class="process-math">\(\beta\)</span> values produce the smallest values for RSS.</div>
</li>
</ol></div></details></div></article><span class="incontext"><a class="internal" href="ch-residual-sum-of-squares-improving-a-models-fit-to-data.html#activity-rss-beta-loop">in-context</a></span>
</body>
</html>
